# 作業ログ 2026-02-12

## YouTube サムネイル 403 エラー対応
- `youtube_uploader.py` のサムネイル設定を try-except でグレースフル処理に変更
- 原因: YouTube アカウントの電話番号認証が未完了
- 対応: ユーザーが YouTube Studio で電話認証を実施、手動でサムネイル設定

## X (Twitter) 投稿の 403/401 エラー対応
- 原因: X Developer Portal のアプリ権限が Read のみだった
- 対応: Read and Write に変更 → API Key/Access Token を全再生成 → .env 更新
- 投稿成功を確認

## Gemini 読みアノテーション自動挿入の廃止
- `script_generator.py` のプロンプトから読みアノテーション指示を削除
- 今後は手動（script.json 編集 + reading_dict.txt）のみで対応

## YouTube 概要欄の改善
- `upload.py` に `_extract_intro()` を追加
- タイトル流用 → note_content の H1 直下段落 + ハッシュタグに変更

## YouTube ショート動画アップロード機能
- `src/upload_shorts.py` を新規作成
- `upload_info.json` から本編 URL を取得し、概要欄に本編リンク・タグ・チャンネルURLを記載
- タイトルの `\n` を YouTube アップロード時に除去

## テロップ改行制御
- `text_renderer.py` の `_wrap_text_by_width()` が `\n` を明示的改行として処理するよう改修
- script.json のセリフに `\n` を入れることで、句読点での改行が可能に

## 毎日の記念日メール送信機能
- `scripts/daily_kinenbi.py` を新規作成
  - Wikipedia 日本語版から「記念日・年中行事」セクションを取得
  - SendGrid API でメール送信
  - `--dry-run` / `--date` オプション対応
- `.github/workflows/daily_kinenbi.yml` を作成
  - 毎日 0:15 JST (cron: `15 15 * * *`) に自動実行
  - `workflow_dispatch` で手動実行も可能
- SendGrid アカウント設定、Sender 認証、API Key 発行を実施
- GitHub Secrets に `SENDGRID_API_KEY`, `EMAIL_TO`, `EMAIL_FROM` を登録
- ローカル送信テスト成功（2月12日の記念日 7件）
